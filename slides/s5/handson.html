<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:doap="http://usefulinc.com/ns/doap#"
      xmlns:dct="http://purl.org/dc/terms/"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xml:lang="en" lang="en" dir="ltr"
      xmlns:dc="http://purl.org/dc/elements/1.1/"
      xmlns:foaf="http://xmlns.com/foaf/0.1/"
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">

<head profile="http://ns.inria.fr/grddl/rdfa/">
<title>Music and the Web of Data</title>
<!-- metadata -->
<meta name="generator" content="S5" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="20091026" />
<meta name="author" content="Matwod Team" />
<meta name="company" content="Queen Mary University of London and BBC" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />
<!-- S5 JS -->
<script src="ui/default/slides.js" type="text/javascript"></script>
</head>
<body>

<div class="layout">
<div id="controls"><!-- DO NOT EDIT --></div>
<div id="currentSlide"><!-- DO NOT EDIT --></div>
<div id="header"></div>
<div id="footer">
<h1>ISMIR 2009 Kobe Japan</h1>
<h2>Share and Share alike - You can say anything about Music on the Web of Data</h2>
</div>
</div>


<div class="presentation">

<div id="handson-title" class="slide">
<h3>Creating your own RDF-powered app</h3>
<h2>Small code examples</h2>
</div>

<div id="handson-1-1" class="slide">
<h1>Loading and querying some RDF</h1>
<p>In this example, we will:</p>
<ul>
<li>Write a bit of RDF</li>
<li>Load it</li>
<li>And query it</li>
</ul>
</div>

<div id="handson-1-2" class="slide">
<h1>Writing some RDF</h1>
<img src="images/Glenn_Gould_1.jpg" alt="Glenn Gould"/>
<div style="position: absolute; top: 40%; left: 40%; width:60%; ">
<p>Describing Glenn Gould's last public performance</p>
<ul>
<li>It happened on April 10, 1964</li>
<li>In Los Angeles, at the <a href="http://dbpedia.org/resource/Ebell_of_Los_Angeles">Wilshire Ebell Theater</a></li>
<li>He played Beethoven's <a href="http://dbpedia.org/resource/Piano_Sonata_No._30_(Beethoven)">Piano Sonata No. 30</a></li>
</ul>
</div>
</div>

<div id="handson-1-3" class="slide">
<h1>Glenn Gould's performance</h1>
<p>Let's first write that there was a <a href="http://purl.org/ontology/mo/Performance">performance</a>, and that it involved <a href="http://dbpedia.org/resource/Glenn_Gould">Glenn Gould</a></p>
<pre><code>
@prefix mo: &lt;http://purl.org/ontology/mo/&gt; .
@prefix : &lt;#&gt; .

:performance
  a mo:Performance ;
  mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; .

<code></pre>
</div>

<div id="handson-1-4" class="slide">
<h1>Happened on April 10, 1964</h1>
<p></p>
<pre><code>
@prefix mo: &lt;http://purl.org/ontology/mo/&gt; .
@prefix : &lt;#&gt; .
@prefix dc: &lt;http://purl.org/dc/elements/1.1/&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

:performance
  a mo:Performance ;
  mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; ;
  dc:date "1964-04-10"^^xsd:date .

</code></pre>
</div>

<div id="handson-1-5" class="slide">
<h1>At the Wilshire Ebell Theater</h1>
<p></p>
<pre><code>
@prefix mo: &lt;http://purl.org/ontology/mo/&gt; .
@prefix : &lt;#&gt; .
@prefix dc: &lt;http://purl.org/dc/elements/1.1/&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix event: &lt;http://purl.org/NET/c4dm/event.owl#&gt; .

:performance
  a mo:Performance ;
  mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; ;
  dc:date "1964-04-10"^^xsd:date ;
  event:place &lt;http://dbpedia.org/resource/Ebell_of_Los_Angeles&gt; .

</code></pre>
</div>

<div id="handson-1-6" class="slide">
<h1>Performed Beethoven's Piano Sonata No. 30</h1>
<p></p>
<pre><code>
@prefix mo: &lt;http://purl.org/ontology/mo/&gt; .
@prefix : &lt;#&gt; .
@prefix dc: &lt;http://purl.org/dc/elements/1.1/&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@prefix event: &lt;http://purl.org/NET/c4dm/event.owl#&gt; .

:performance
  a mo:Performance ;
  mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; ;
  dc:date "1964-04-10"^^xsd:date ;
  event:place &lt;http://dbpedia.org/resource/Ebell_of_Los_Angeles&gt; ;
  mo:performance_of &lt;http://dbpedia.org/resource/
                            Piano_Sonata_No._30_(Beethoven)&gt; .

</code></pre>
</div>

<div id="handson-1-7" class="slide">
<h1>Checking that it parses...</h1>
<p>Go to <a href="http://www.rdfabout.com/demo/validator/">http://www.rdfabout.com/demo/validator/</a> and check your RDF (make sure to select "Turtle" in the input format drop-down list)</p>
<p>Or, if you have raptor-utils installed, just run the following from the command-line:</p>
<pre><code>
	$ rapper -i turtle glenn_gould_performance.n3
	</code></pre>
<p>It should give 5 RDF triples</p>
</div>

<div id="handson-1-8" class="slide">
<h1>Querying from the command-line (1)</h1>
<p>Give me places in which Glenn Gould played:</p>
<pre><code>
PREFIX mo: &lt;http://purl.org/ontology/mo/&gt;
PREFIX event: &lt;http://purl.org/NET/c4dm/event.owl#&gt;
SELECT ?place
FROM &lt;glenn_gould_performance.n3&gt;
WHERE {
?performance
  mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; ;
  event:place ?place
}
</code></pre>
<p>Save as places_in_which_glenn_gould_played.rq</p>
</div>

<div id="handson-1-9" class="slide">
<h1>Querying from the command-line (2)</h1>
<p>Use roqet from the rasqal-utils package:</p>
<code><pre>
$ roqet places_in_which_glenn_gould_played.rq 

roqet: Querying from file places_in_which_glenn_gould_played.rq
roqet: Query has a variable bindings result
result: [place=uri&lt;http://dbpedia.org/resource/Ebell_of_Los_Angeles&gt;]
roqet: Query returned 1 results

</code></pre>
</div>

<div id="python00" class="slide">
<h1>Let's do it in python</h1>
<p>We can use <a href="http://www.rdflib.org/">rdflib</a> to parse local <i>and</i> remote RDF
	- get this data <i>linked</i></p>
<p>install rdflib using Python EZ setuptools 
	<a href="http://pypi.python.org/pypi/setuptools">http://pypi.python.org/pypi/setuptools</a></p>
<pre><code>
	$ sudo easy_install rdflib -U "rdflib>=2.4"
	
</code></pre>
</div>

<div id="python01" class="slide">
	<h1>Interactive terminal action</h1>
	<p>open a terminal window and go to the directory with <code>glenn_gould_performance.n3</code></p>
	<p>if you have <a href="http://ipython.scipy.org/">ipython</a>, launch it now otherwise just launch python</p>
	<pre><code>
		$ cd path/to/glenn_gould
		$ ipython
	</code></pre>
</div>

<div id="python02" class="slide">
	<h1>rdflib is easy!</h1>
	<p>Once inside python or ipython</p>
<pre><code>
>>> import rdflib
>>> graph = rdflib.ConjunctiveGraph()
>>> graph.parse('glenn_gould_performance.n3', format='n3')
	
</code></pre>
<p>We've loaded the RDF graph into memory!
	 We have to specify to the parser our format is 'n3' as it assumes RDF/XML (which is a bit lame)</p>
</div>

<div id="python03" class="slide">
	<h1>Write our query</h1>
	<p style="text-decoration: blink">we could load our query from the text file, but let's just re-type it in the terminal</p>
<pre><code>
>>> query = '''
...     PREFIX mo: &lt;http://purl.org/ontology/mo/&gt;
...     PREFIX event: &lt;http://purl.org/NET/c4dm/event.owl#&gt;
...     SELECT ?place
...     FROM &lt;glenn_gould_performance.n3&gt;
...     WHERE {
...     ?performance
...       mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; ;
...       event:place ?place
...     }'''

</code></pre>
</div>

<div id="python04" class="slide">
	<h1>Do the query</h1>
	<p>With rdflib, you'll generally make your query and iterate over the results all at once</p>
<pre><code>
	>>> for row in graph.query(query):
	...     print row[0]
	... 
</code></pre>
	<p>each result row is a tuple where the length / order of the tuple corresponds exactly to the 
		<code>SELECT</code> statement of the query</p>
	<p>here we only have one element and one row</p>
</div>

<div id="python05" class="slide">
	<h1>Let's get linked</h1>
	<p>The same <code>.parse</code> function we used to parse our local file can parse URIs over the Web</p>
<pre><code>
>>> graph.parse('http://dbpedia.org/resource/Glenn_Gould')
>>> graph.parse('http://dbpedia.org/resource/Ebell_of_Los_Angeles')
	
</code></pre>
<p>rdflib handles the headers and requests an RDF representation of these resources and adds it to our 
	<code>graph</code> in memory</p>
<p>now we can make even more complex queries</p>
</div>

<div id="python06" class="slide">
	<h1>What does DBpedia actually know</h1>
	<p>Load the Glenn Gould and Ebell URIs in your browser - you'll be redirected to a human-readble html page:</p>
	<p class="small indent">
		<a href="http://dbpedia.org/page/Glenn_Gould">http://dbpedia.org/page/Glenn_Gould</a></p>
	<p class="small indent">
		<a href="http://dbpedia.org/page/Ebell_of_Los_Angeles">http://dbpedia.org/page/Ebell_of_Los_Angeles</a></p>
	<p>Now we can inspect by hand what sort of properties, classes, and literals are available.</p>
	<p>This is a common first step when building a linked data app - finding out what data is available.</p>
</div>

<div id="python07" class="slide">
	<h1>Another layer to our query</h1>
	<p>Who is the architect of the Ebell?</p>
	<pre><code>
PREFIX mo: &lt;http://purl.org/ontology/mo/&gt;
PREFIX event: &lt;http://purl.org/NET/c4dm/event.owl#&gt;
PREFIX dbp: &lt;http://dbpedia.org/property/&gt;

SELECT ?place ?architect
WHERE { ?performance
	       mo:performer &lt;http://dbpedia.org/resource/Glenn_Gould&gt; ;
	          event:place ?place .
	    ?place dbp:architect ?architect .  }
		
</code></pre>

</div>

<div id="python08" class="slide">
	<h1>Even more links</h1>
	<p>You may have noticed the <code>owl:sameAs</code> property related to Glenn Gould</p>
	<p>We can add eve more info to our graph!</p>
<pre><code>
>>> query = '''
... SELECT DISTINCT ?glenn WHERE
... { &lt;http://dbpedia.org/resource/Glenn_Gould&gt; 
...  		&lt;http://www.w3.org/2002/07/owl#sameAs&gt; ?glenn . } '''

>>> sameAs = []
>>> for row in graph.query(query):
>>>     sameAs.append(row[0])

>>> for resource in sameAs:
>>>     graph.parse(resource)

</code></pre>
</div>
		
<!-- More advanced stuff here... Loading linked dbpedia info and querying it etc. -->

<!-- end presentation -->
</div>

</body>
</html>
